# Домашнее задание ШРИ: Инфраструктура

Выполнено на основе примера сайта интернет-магазина из задания про тестирование.

## Скрипты

Скриты написаны на JS для исполнения в среде Node.js

- runRelease.js
- runTests.js
- runDocker.js

OAuth-токен и номер организации хранятся в Secrets, для задач отладки их можно указать в файле `.env` (установлен пакет `dotenv`).

### runRelease

Логика работы функции `release()`:
- Проверяем, работает ли git
- Получаем последний и предыдущий теги при помощи `git tag`
- Ищем, был ли ранее создан тикет
  - поиск осуществляем по полю `unique`, которое содержит поле в формате `номер-организации_тег`
- Если тикет уже существует, создаём новый, иначе редактируем существующий
- Автора, дату коммита с тегом и список изменений получаем при помощи `git log` с использованием ключа `--pretty=format`
- Запускает runTests и runDocker, и публикует их результат работы в виде комментариев к тикету

### runTests

Запускает jest и выводит его результат в `stdout`. По умолчанию jest выводит отчёт о тестировании в `stderr`, 
это поведение перопределено при помощи npm-пакета `jest-standard-reporter`.

### runDocker

Собирает образ с текущим репозиторием.

## Желательные доработки

- Использовать GitHub API для получении информации о тегах и коммитах;
- Запускать runTests и runDocker параллельно;
- Запускать runTests и runDocker как независимые экшны, независимо получая ключ тикета с записью о релизе;
- Добавить к параметрам сборки образа имя репозитория и тег.
